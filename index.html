<!DOCTYPE html> 
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="theme-color" content="#667eea">
        <link rel="manifest" href="manifest.json">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="default">
        <link rel="apple-touch-icon" href="icons/icon-192.svg">
        <title>Notes de Musique - Jeu d'apprentissage</title>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="style.css">
    </head>
<body>
<main class="content">
<section class="card container">
    <h1 class="sr-only">Do RÃ© Mi Challenge</h1>

    <p style="text-align: center; margin-top: 0px;">
        <img src="logo.png" alt="Logo du jeu Do RÃ© Mi Challenge" class="logo" width="135px">
    </p>

    <button id="installBtn" class="icon-btn" style="display:none;">ğŸ“¥</button>

    <div class="mode-selection" id="modeSelection">

    <div class="instruction">Type de dÃ©fi :</div>
    <div class="mode-buttons">
        <button class="mode-btn" data-mode="forward">
            Note suivante â–¶ï¸
        </button>
        <button class="mode-btn" data-mode="backward">
            Note prÃ©cÃ©dente â—€ï¸
        </button>
    </div>

    <div class="difficulty-section">
        <div class="label-with-tooltip">
            <div class="instruction">Choisissez la difficultÃ© :</div>
            <button type="button" class="tooltip-btn" aria-describedby="difficultyTooltip" aria-label="Aide difficultÃ©">â“˜</button>
            <div id="difficultyTooltip" role="tooltip" class="tooltip-text">
                <div>Facile : pas de limite de temps.</div>
                <div>Moyen : 3 secondes pour rÃ©pondre.</div>
                <div>Difficile : 1 seconde, plus rapide.</div>
            </div>
        </div>
        <div class="difficulty-buttons">
            <button class="difficulty-btn" data-difficulty="easy">
                ğŸ˜Š Facile<br><small>(âˆ)</small>
            </button>
            <button class="difficulty-btn" data-difficulty="medium">
                ğŸ˜ Moyen<br><small>(3s)</small>
            </button>
            <button class="difficulty-btn" data-difficulty="hard">
                ğŸ˜° Difficile<br><small>(1s)</small>
            </button>
        </div>
    </div>

    <div class="notation-toggle">
        <label class="checkbox">
            <input type="checkbox" id="intlNotationCheckbox">
            <span>Notation internationale</span>
        </label>
    </div>

    <div class="actions">
        <button class="start-game-btn" id="startGameBtn" disabled>
            Commencer
        </button>
    </div>
</div>

<div class="game-area" id="gameArea">
    <div class="score-board">
        <p>RÃ©ponses : 0/0</p>
    </div>

    <div class="timer-text" id="timerText"></div>
    <div class="timer-bar" id="timerBar" style="display: none;">
        <div class="timer-fill" id="timerFill"></div>
    </div>

    <div class="instruction-and-volume">
        <div class="instruction" id="instruction"></div>
            <div class="audio-controls">
            <button id="muteBtn" class="icon-btn" aria-pressed="false">ğŸ”Š</button>            </div>
    </div>
    <div class="current-note" id="currentNote">Do</div>

    <div class="notes-grid" id="notesGrid"></div>

    <div class="feedback" id="feedback"></div>

    <button class="restart-btn" id="restartBtn">Retour Ã  l'accueil</button>
</div>
</section>
</main>

    <script src="https://unpkg.com/soundfont-player@0.15.2/dist/soundfont-player.js"></script>
    <script src="https://unpkg.com/tone@next/build/Tone.js"></script>
    <script type="module" src="script.js"></script>
<script>
    // Service worker registration for PWA (scope root)
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/sw.js', { scope: '/' }).catch(() => {});
        });
    }
</script>
</body>
</html>
